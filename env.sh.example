# ============================================================
# Zpravobot NG - Environment Configuration
# ============================================================
# Source this file in all cron/wrapper scripts:
#   source "${SCRIPT_DIR}/env.sh"
#
# Pro produkci změň ZBNW_DIR na /vaše/cesta/k-aplikaci
# a ZBNW_SCHEMA na db_schema (nebo odkomentuj)
#
# Location: /vaše/cesta/k-aplikaci/env.sh
# ============================================================

# ===================
# Timezone - všechny logy a časové značky v CET/CEST
# ===================
export TZ="Europe/Prague"

# ===================
# Základní cesty
# ===================
export ZBNW_DIR="/vaše/cesta/k-aplikaci"
export ZBNW_CONFIG_DIR="${ZBNW_DIR}/config"
export ZBNW_LOG_DIR="${ZBNW_DIR}/logs"

# ===================
# Databáze
# ===================
# Pro test:
export ZBNW_SCHEMA="db_schema_test"
# Pro produkci:
# export ZBNW_SCHEMA="db_schema"

# ===================
# IFTTT Webhook
# ===================
export IFTTT_QUEUE_DIR="${ZBNW_DIR}/queue/ifttt"
export IFTTT_PORT="8089"
export IFTTT_BIND="0.0.0.0"
# export IFTTT_AUTH_TOKEN=""  # Nastav pro autentizaci webhooků

# ===================
# Nitter (Twitter scraping)
# ===================
export NITTER_INSTANCE="http://vase.nitter.instance:8080"

# ===================
# Mastodon (pro profile sync)
# ===================
# Načítá se z config/mastodon_accounts.yml
# export MASTODON_INSTANCE="https://vase.mastodon.instance"

# ===================
# Ruby/Bundle
# ===================
# Pokud bundle není v PATH cronu
# export PATH="/usr/local/bin:$PATH"

# ===================
# Zajisti adresáře
# ===================
mkdir -p "${ZBNW_LOG_DIR}"
mkdir -p "${ZBNW_DIR}/tmp"
mkdir -p "${IFTTT_QUEUE_DIR}/pending"
mkdir -p "${IFTTT_QUEUE_DIR}/processed"
mkdir -p "${IFTTT_QUEUE_DIR}/failed"

# ===================
# Údržbot - Health Monitor
# ===================
export ZPRAVOBOT_MONITOR_TOKEN="token-monitorovaciho-bota"

# ===================
# Browserless.io (Facebook profile sync)
# ===================
export BROWSERLESS_TOKEN="browserless-token"

# ===================
# Facebook Cookies (pro profile sync via Browserless)
# ===================
export FB_COOKIE_DATR="fb-cookie-datr"
export FB_COOKIE_C_USER="fb-cookie-c-user"
export FB_COOKIE_XS="fb-cookie-xs"
export FB_COOKIE_SB="fb-cookie-sb"
